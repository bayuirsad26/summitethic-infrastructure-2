# {{ ansible_managed }}
# SummitEthic Initial SSH Configuration

Port {{ ssh_port }}
Protocol 2
HostKey /etc/ssh/ssh_host_ed25519_key
HostKey /etc/ssh/ssh_host_rsa_key

# Authentication
LoginGraceTime {{ login_grace_time }}
PermitRootLogin {{ ssh_permit_root_login }}
StrictModes yes
MaxAuthTries {{ max_auth_tries }}
MaxSessions 4

# Key authentication
PubkeyAuthentication {{ 'yes' if ssh_pubkey_authentication else 'no' }}
AuthorizedKeysFile .ssh/authorized_keys

# Password authentication
PasswordAuthentication {{ 'yes' if ssh_password_authentication else 'no' }}
PermitEmptyPasswords no
ChallengeResponseAuthentication no

# Security settings
X11Forwarding no
UsePrivilegeSeparation yes
UseDNS no
PermitUserEnvironment no
AllowAgentForwarding no
AllowTcpForwarding no
Banner /etc/issue.net

# Logging
SyslogFacility AUTH
LogLevel VERBOSE

# Limits
ClientAliveInterval 300
ClientAliveCountMax 3